<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title><%= assigns[:page_title] || "Bonfire Â· Share books you are reading and loving" %></title>
    <link rel="stylesheet" href="<%= Routes.static_path(@conn, "/css/app.css") %>"/>
    <%= csrf_meta_tag() %>
  </head>
  <body>
    <div class="container">
      <nav class="header is-clearfix">
        <a href="/" class="logo">
          <span class="svg-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M323.56 51.2c-20.8 19.3-39.58 39.59-56.22 59.97C240.08 73.62 206.28 35.53 168 0 69.74 91.17 0 209.96 0 281.6 0 408.85 100.29 512 224 512s224-103.15 224-230.4c0-53.27-51.98-163.14-124.44-230.4zm-19.47 340.65C282.43 407.01 255.72 416 226.86 416 154.71 416 96 368.26 96 290.75c0-38.61 24.31-72.63 72.79-130.75 6.93 7.98 98.83 125.34 98.83 125.34l58.63-66.88c4.14 6.85 7.91 13.55 11.27 19.97 27.35 52.19 15.81 118.97-33.43 153.42z"/></svg>
          </span>
          <b>Bonfire</b> reading
        </a>
        <input class="menu-btn" type="checkbox" id="menu-btn" />
        <label class="menu-icon" for="menu-btn"><span class="navicon"></span></label>
        <ul class="menu">
          <%= if Pow.Plug.current_user(@conn) do %>
          <li><a href="/tracks">My books</a></li>
          <li>
            <%= link to: Routes.reading_state_path(@conn, :new), class: "new-reading-state" do %>
              <span class="svg-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"/></svg>
              </span>
              Add new book
            <% end %>
          </li>

          <li><%= link "Sign out", to: Routes.pow_session_path(@conn, :delete), method: :delete, class: "navbar-item" %></li>

          <% else %>
          <li><%= link "Sign up", to: Routes.pow_registration_path(@conn, :new) %></li>
          <li><%= link "Sign in", to: Routes.pow_session_path(@conn, :new) %></li>
          <% end %>
        </ul>
      </nav>
    </div>

    <main role="main">
      <div class="container">
        <% info = get_flash(@conn, :info) %>
        <% error = get_flash(@conn, :error) %>

        <%= if info do %><div class="notification is-success is-light" role="alert"><%= info %></div><% end %>
        <%= if error do %><div class="notification is-success is-light" role="alert"><%= error %></div><% end %>
      </div>

      <%= render @view_module, @view_template, assigns %>
    </main>

    <script type="text/javascript" src="<%= Routes.static_path(@conn, "/js/app.js") %>"></script>

    <footer class="footer">
      <div class="content has-text-centered">
        <div><a href="https://github.com/qhwa/bonfire">Source code</a></div>
      </div>
    </footer>
  </body>
</html>
